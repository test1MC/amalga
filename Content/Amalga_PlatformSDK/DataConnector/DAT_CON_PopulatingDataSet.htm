<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="4" MadCap:lastHeight="1302" MadCap:lastWidth="834" MadCap:fileTags="TopicType.Concept,TopicOwner.v-dennk,Status.50 - InTech Review,ReleaseTarget.TAP,Personas.Elvis: App Dev,EditingTags.1 - Ready for Edit" MadCap:conditions="Region.US">
    <head>
        <link href="../../Resources/Stylesheets/AmalgaMain.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1 style="font-style: normal;">Populating a DataSet from an AmalgaDbDataAdapter</h1>
        <p class="PersonaAppDev">&#160;</p>
        <p class="abstract">This topic describes how to use the AmalgaDbDataAdapter class in <MadCap:variable name="FeatureName.Amalga ADO.NET" /> to populate a DataSet object from ADO.NET.</p>
        <p>In ADO.NET, the <span class="ForeignCodeElements">DataSet</span> class is a memory-resident representation of data that provides a consistent relational programming model, independent of the data source. The <span class="ForeignCodeElements">DataSet</span> class represents a complete set of data that includes tables, constraints, <a href="../Renamed Me.htm">MyNewTopic</a> and relationships among the tables. Interaction between the <span class="ForeignCodeElements">DataSet</span> and data sources is controlled through a provider-specific implementation of the <span class="ForeignCodeElements">DbDataAdapter</span> class in ADO.NET. The <span class="ForeignCodeElements">AmalgaDbDataAdapter</span> class in <MadCap:variable name="FeatureName.Amalga ADO.NET" /> provides the implementation of the  <span class="ForeignCodeElements">DbDataAdapter</span> class in ADO.NET.  For more information about the <span class="ForeignCodeElements">DbDataAdapter</span> class in ADO.NET, see <a href="http://msdn.microsoft.com/library/system.data.common.dbdataadapter.aspx">DbDataAdapter Class</a><MadCap:conditionalText MadCap:conditions="Production.PrintOnly">, on Microsoft Developer Network at <a href="http://msdn.microsoft.com/library/system.data.common.dbdataadapter.aspx">http://msdn.microsoft.com/library/system.data.common.dbdataadapter.aspx</a></MadCap:conditionalText>. </p>
        <p>The <span class="ForeignCodeElements">SelectCommand</span> property of the <span class="ForeignCodeElements">AmalgaDbDataAdapter</span> class is an <span class="ForeignCodeElements">AmalgaDbCommand</span> object that retrieves data from an instance of the DataConnector platform application. The <span class="ForeignCodeElements">InsertCommand</span>, <span class="ForeignCodeElements">UpdateCommand</span>, and <span class="ForeignCodeElements">DeleteCommand</span> properties of the <span class="ForeignCodeElements">AmalgaDbDataAdapter</span> class are also <span class="ForeignCodeElements">AmalgaDbCommand</span> objects, used to manage updates to the data in the data source according to modifications made to the data in the <span class="ForeignCodeElements">DataSet</span> object. These properties are covered in more detail in .</p>
        <p>The <span class="ForeignCodeElements">Fill</span> method of the <span class="ForeignCodeElements">AmalgaDbDataAdapter</span> class, inherited from the <span class="ForeignCodeElements">DbDataAdapter</span> class in ADO.NET, is used to populate a <span class="ForeignCodeElements">DataSet</span> object with the results of the <span class="ForeignCodeElements">AmalgaDbCommand</span> object in the <span class="ForeignCodeElements">SelectCommand</span> property of the <span class="ForeignCodeElements">AmalgaDbDataAdapter</span> class. The <span class="ForeignCodeElements">Fill</span> method takes as its arguments a <span class="ForeignCodeElements">DataSet</span> object to be populated, and a <span class="ForeignCodeElements">DataTable</span> object, or the name of the <span class="ForeignCodeElements">DataTable</span> object to be filled with the rows returned from the command in the <span class="ForeignCodeElements">SelectCommand</span> property.</p>
        <p class="note">Using the <span class="ForeignCodeElements">AmalgaDbDataAdapter</span> class to retrieve an entire application view takes time, especially if there are many rows in the application view. This is because accessing the database, locating and processing the data, and then transferring the data to the object is time consuming. To improve performance, you can use the WHERE clause to greatly reduce the number of rows returned to the client. You can also reduce the amount of data returned to the client by only explicitly listing required columns in the SELECT statement. Another good workaround is to retrieve the rows in batches (such as several hundred rows at a time) and only retrieve the next batch when the client is finished with the current batch.</p>
        <p class="Figure">The <span class="ForeignCodeElements">Fill</span> method uses the <span class="ForeignCodeElements">AmalgaDbDataReader</span> object implicitly to return the column names and types that are used to create the tables in the <span class="ForeignCodeElements">DataSet</span> object, and the data to populate the rows of the tables in the <span class="ForeignCodeElements">DataSet</span> object. Tables and columns are only creaqted if they do not already exist; otherwise, the <span class="ForeignCodeElements">Fill</span> method uses the existing schema in the <span class="ForeignCodeElements">DataSet</span> object. Column types are created as .NET&#160;Framework data types. Primary keys are not created unless they exist in the data source and the <span class="ForeignCodeElements">MissingSchemaAction</span> property is set to <span class="ForeignCodeElements">MissingSchemaAction.AddWithKey</span>. If the <span class="ForeignCodeElements">Fill</span> method finds that a primary key exists for a table, it will overwrite data in the <span class="ForeignCodeElements">DataSet</span> object with data from the data source for rows where the primary key column values match those of the row returned from the data source. If no primary key is found, the data is appended to the table in the <span class="ForeignCodeElements">DataSet</span> object. The <span class="ForeignCodeElements">Fill</span> method uses any mappings that may exist when you populate the <span class="ForeignCodeElements">DataSet</span> object.</p>
        <p class="note">If the command in the <span class="ForeignCodeElements">SelectCommand</span> property returns the results of an OUTER&#160;JOIN, the <span class="ForeignCodeElements">AmalgaDbDataAdapter</span> class does not set a <span class="ForeignCodeElements">PrimaryKey</span> property value for the resulting <span class="ForeignCodeElements">DataTable</span> object. You must define the <span class="ForeignCodeElements">PrimaryKey</span> property of the <span class="ForeignCodeElements">DataTable</span> object yourself to ensure that duplicate rows are resolved correctly. For more information, see <a href="http://msdn.microsoft.com/library/z24kefs8.aspx">Defining Primary Keys</a><MadCap:conditionalText MadCap:conditions="Production.PrintOnly">, on Microsoft Developer Network at <a href="http://msdn.microsoft.com/library/z24kefs8.aspx">http://msdn.microsoft.com/library/z24kefs8.aspx</a></MadCap:conditionalText>.</p>
        <p class="SeeAlso" MadCap:conditions="Production.doNOTbuild">See also</p>
        <p class="SeeAlsoSubHead" MadCap:conditions="Production.doNOTbuild">Tasks</p>
        <p MadCap:conditions="Production.doNOTbuild">[Cross reference or hyperlink if external resource]</p>
        <p class="SeeAlsoSubHead" MadCap:conditions="Production.doNOTbuild">References</p>
        <p MadCap:conditions="Production.doNOTbuild">[Cross reference or hyperlink if external resource]</p>
        <p class="SeeAlsoSubHead" MadCap:conditions="Production.doNOTbuild">Concepts</p>
        <p MadCap:conditions="Production.doNOTbuild">[Cross reference or hyperlink if external resource]</p>
        <p class="SeeAlsoSubHead" MadCap:conditions="Production.doNOTbuild">Other resources </p>
        <p MadCap:conditions="Production.doNOTbuild">[Cross reference or hyperlink if external resource]</p>
    </body>
</html>